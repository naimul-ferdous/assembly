		ORG 00H
		MOV DPTR, #CACODE
		MOV P3, #0FFH
		MOV P1, #7FH

;;all keys are open ?
KYCHK: 		MOV A, P3
		SETB ACC.6
		CJNE A, #0FFH, KYCHK
		CALL DBONC	;20ms
		CALL DBONC
;; read key board

KYPUSH: 	MOV A, P3
		SETB ACC.6
		CJNE A, #0FFH, RDKEY 
		SJMP KYPUSH

RDKEY:		CALL DBONC
		CALL DBONC	
		CPL A
		MOV R0, #00H
		
DETEKT:		RRC A
		JC KYCODE
		INC R0
		SJMP DETEKT

KYCODE:		MOV A, R0
		MOVC A, @A, DPTR
		MOV P1, A
		SJMP KYPUSH 

DBONC:		MOV R7, #0FFH
WAIT: 		DJNZ R7, WAIT
		RET
CACODE: DB 40H, 79H, 24H, 30H, 19H, 12H, 02H, 78H ; 0-7
		END